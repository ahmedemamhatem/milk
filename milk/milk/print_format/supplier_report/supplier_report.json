{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-09-26 20:09:35.441523",
 "custom_format": 1,
 "disabled": 0,
 "doc_type": "Weekly Supplier Payment",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{% set BRAND = \"\u0623\u0644\u0628\u0627\u0646 \u0627\u0644\u0639\u0645\u0631\u064a\" %}\n{% macro fmt(n) -%}{{ (\"%.2f\"|format((n or 0) | float)) }}{%- endmacro %}\n\n<style>\n  @media print {\n    @page { size: A4; margin: 6mm; }\n    html, body { height: auto !important; }\n  }\n\n  body {\n    direction: rtl;\n    text-align: right;\n    font-family: \"Segoe UI\", Tahoma, Arial, sans-serif;\n    color: #000;\n    margin: 0;\n    font-size: 11px;\n  }\n\n  /* Cards */\n  .card {\n    border: 1px solid #000;\n    border-radius: 3px;\n    background: #fff;\n    padding: 3px 4px;\n    page-break-inside: avoid;\n  }\n\n  /* Dotted spacer between blocks */\n  .spacer {\n    border-top: 1px dotted #000;\n    margin: 2.5mm 0;\n  }\n\n  /* Grid */\n  .grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 3mm;\n    margin-top: 3mm;\n  }\n  @media screen and (max-width: 900px) {\n    .grid { grid-template-columns: 1fr; }\n  }\n\n  /* First section: clean header band, no inner lines for data */\n  .hdr-band {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-weight: 800;\n    font-size: 11px;\n    padding: 2px 3px;\n    border-bottom: 1px solid #000;\n    margin-bottom: 2px;\n  }\n  .brand { font-weight: 900; }\n\n  .tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 3px 6px;\n    margin-top: 2px;\n    align-items: center;\n  }\n  .tag {\n    font-size: 10.5px;\n    line-height: 1.15;\n    white-space: nowrap;\n  }\n  .sep { margin: 0 4px; }\n\n  .summary {\n    margin-top: 3px;\n    font-size: 10.5px;\n    line-height: 1.25;\n  }\n\n  /* Supplier card header */\n  .sup-hdr {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border: 1px solid #000;\n    border-radius: 2px;\n    padding: 2px 3px;\n    font-weight: 700;\n    font-size: 11px;\n    line-height: 1.1;\n  }\n  .sup-meta { font-size: 10.5px; line-height: 1.1; }\n\n  /* Table: compact */\n  table.mini {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 3px;\n    font-size: 10.5px;\n    table-layout: fixed;\n    border: 1px solid #000;\n  }\n  .mini th, .mini td {\n    border: 1px solid #000;\n    padding: 2px;\n    text-align: center;\n    vertical-align: middle;\n    height: 19px;\n    line-height: 1.1;\n  }\n  .mini thead th { white-space: nowrap; }\n  .mini tfoot td { font-weight: 700; }\n\n  .totals-line {\n    white-space: normal;\n    overflow-wrap: anywhere;\n    line-height: 1.25;\n  }\n\n  /* Cutting guide row */\n  .cut-row {\n    position: relative;\n    margin-top: 3px;\n    height: 0;\n    border-top: 1px dotted #000; /* dotted cutting line */\n  }\n  /* Small scissors glyph using pseudo-element (monospace fallback) */\n  .cut-row::before {\n    content: \"\u2702\";\n    position: absolute;\n    top: -10px;\n    right: 0;            /* RTL: place at right edge */\n    font-size: 10px;\n    line-height: 1;\n    background: #fff;\n    padding: 0 2px;\n  }\n\n  .foot {\n    text-align: center;\n    margin-top: 3px;\n    font-weight: 700;\n    font-size: 10.5px;\n  }\n</style>\n\n{% set arfmt = frappe.utils.formatdate %}\n{% set start = doc.start_date %}\n{% set end   = doc.to_date %}\n{% set date_range = (arfmt(start, \"dd MMMM yyyy\") ~ \" - \" ~ arfmt(end, \"dd MMMM yyyy\")) %}\n\n<!-- FIRST SECTION -->\n<div class=\"card\">\n  <div class=\"hdr-band\">\n    <div class=\"brand\">{{ _(BRAND) }}</div>\n    <div>\u0643\u0634\u0641 \u0623\u0633\u0628\u0648\u0639\u064a \u2014 {{ frappe.utils.escape_html(doc.name or \"\") }}</div>\n  </div>\n\n  <div class=\"tags\">\n    <span class=\"tag\">\u0627\u0644\u0641\u062a\u0631\u0629: <strong>{{ date_range }}</strong></span>\n    <span class=\"tag\">\u0627\u0644\u0633\u0627\u0626\u0642: <strong>{{ doc.driver or \"-\" }}</strong></span>\n    {% if doc.village %}<span class=\"tag\">\u0627\u0644\u0642\u0631\u064a\u0629: <strong>{{ doc.village }}</strong></span>{% endif %}\n  </div>\n\n  <div class=\"summary\">\n    \u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639: <strong>{{ fmt(doc.total_week_amount or 0) }}</strong>\n    <span class=\"sep\">|</span>\n    \u062e\u0635\u0645 \u062c\u0648\u062f\u0647 + \u0645\u0633\u062d\u0648\u0628: <strong>-{{ fmt((doc.total_deduction_amount or 0) + (doc.total_loans or 0)) }}</strong>\n    <span class=\"sep\">|</span>\n    \u0627\u0644\u0635\u0627\u0641\u064a \u0642\u0628\u0644 \u0627\u0644\u062a\u0642\u0631\u064a\u0628: <strong>{{ fmt(doc.total_amount or 0) }}</strong>\n    <span class=\"sep\">|</span>\n    \u0623\u0642\u0644 \u0645\u0646 5: <strong>-{{ fmt(doc.total_less_5 or 0) }}</strong>\n    <span class=\"sep\">|</span>\n    \u0627\u0644\u0645\u0633\u062a\u062d\u0642 \u0644\u0644\u062f\u0641\u0639: <strong>{{ fmt(doc.total_payment or 0) }}</strong>\n  </div>\n</div>\n\n<div class=\"spacer\"></div>\n\n<!-- SUPPLIER CARDS -->\n<div class=\"grid\">\n  {% for r in doc.weekly_pay_table %}\n    {% set total_morning = (r.total_morning_qty or 0) | float %}\n    {% set total_evening = (r.total_evening_qty or 0) | float %}\n    {% set total_qty     = (r.total_qty or 0) | float %}\n    {% set week_amount   = (r.total_week_amount or 0) | float %}\n    {% set deduction_amt = (r.deduction_amount or 0) | float %}\n    {% set supplier_loan = (r.supplier_loan or 0) | float %}\n    {% set total_ded     = (r.total_deduction_amount or 0) | float %}\n    {% set net_before    = (r.total_amount or (week_amount - total_ded)) | float %}\n    {% set less5         = (r.less_5 or 0) | float %}\n    {% set net_pay       = (r.total_amount_to_pay or (net_before - less5)) | float %}\n    {% set milk_type     = r.milk_type or \"\" %}\n    {% set rate          = (r.rate or 0) | float %}\n\n    <div class=\"card\">\n      <div class=\"sup-hdr\">\n        <div class=\"brand\">{{ _(BRAND) }}</div>\n        <div class=\"sup-meta\">\n          {{ frappe.utils.escape_html(r.supplier_name or r.supplier or \"-\") }}\n          <span class=\"sep\">|</span>\n          ({{ frappe.utils.escape_html(r.village or \"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f\") }})\n          <span class=\"sep\">|</span>\n          {{ frappe.utils.escape_html(milk_type) }}{% if rate %} ({{ fmt(rate) }}){% endif %}\n        </div>\n      </div>\n\n      <table class=\"mini\">\n        <thead>\n          <tr>\n            <th>\u0627\u0644\u064a\u0648\u0645</th>\n            <th>\u0627\u0644\u0623\u062d\u062f</th>\n            <th>\u0627\u0644\u0627\u062b\u0646\u064a\u0646</th>\n            <th>\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621</th>\n            <th>\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621</th>\n            <th>\u0627\u0644\u062e\u0645\u064a\u0633</th>\n            <th>\u0627\u0644\u062c\u0645\u0639\u0629</th>\n            <th>\u0627\u0644\u0633\u0628\u062a</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td><strong>\u0627\u0644\u0635\u0628\u0627\u062d</strong></td>\n            <td>{{ fmt(r.sunday_morning) }}</td>\n            <td>{{ fmt(r.monday_morning) }}</td>\n            <td>{{ fmt(r.tuesday_morning) }}</td>\n            <td>{{ fmt(r.wednesday_morning) }}</td>\n            <td>{{ fmt(r.thursday_morning) }}</td>\n            <td>{{ fmt(r.friday_morning) }}</td>\n            <td>{{ fmt(r.saturday_morning) }}</td>\n          </tr>\n          <tr>\n            <td><strong>\u0627\u0644\u0645\u0633\u0627\u0621</strong></td>\n            <td>{{ fmt(r.sunday_evening) }}</td>\n            <td>{{ fmt(r.monday_evening) }}</td>\n            <td>{{ fmt(r.tuesday_evening) }}</td>\n            <td>{{ fmt(r.wednesday_evening) }}</td>\n            <td>{{ fmt(r.thursday_evening) }}</td>\n            <td>{{ fmt(r.friday_evening) }}</td>\n            <td>{{ fmt(r.saturday_evening) }}</td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td>\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a</td>\n            <td colspan=\"7\" class=\"totals-line\">\n              \u0635\u0628\u0627\u062d: <strong>{{ fmt(total_morning) }}</strong>\n              <span class=\"sep\">|</span>\n              \u0645\u0633\u0627\u0621: <strong>{{ fmt(total_evening) }}</strong>\n              <span class=\"sep\">|</span>\n              \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a: <strong>{{ fmt(total_qty) }}</strong>\n              <span class=\"sep\">|</span>\n              \u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639: <strong>{{ fmt(week_amount) }}</strong>\n              {% if deduction_amt and deduction_amt > 0 %}\n                <span class=\"sep\">|</span>\n                \u062e\u0635\u0645 \u062c\u0648\u062f\u0647: <strong>-{{ fmt(deduction_amt) }}</strong>\n              {% endif %}\n              {% if supplier_loan and supplier_loan > 0 %}\n                <span class=\"sep\">|</span>\n                \u0645\u0633\u062d\u0648\u0628: <strong>-{{ fmt(supplier_loan) }}</strong>\n              {% endif %}\n              {% if less5 and less5 > 0 %}\n                <span class=\"sep\">|</span>\n                \u0623\u0642\u0644 \u0645\u0646 5: <strong>-{{ fmt(less5) }}</strong>\n              {% endif %}\n              <span class=\"sep\">|</span>\n              \u0627\u0644\u0635\u0627\u0641\u064a: <strong>{{ fmt(net_pay) }}</strong>\n            </td>\n          </tr>\n        </tfoot>\n      </table>\n\n      <!-- Cutting guide inside the card -->\n      <div class=\"cut-row\"></div>\n\n      <div class=\"foot\">\n        \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a: \u0660\u0661\u0660\u0661\u0668\u0661\u0661\u0665\u0664\u0661\u0665\u0661 \u2014 \u0627\u0644\u062d\u0627\u062c \u0623\u062d\u0645\u062f: \u0660\u0661\u0661\u0662\u0666\u0669\u0665\u0664\u0667\u0660\u0660\n      </div>\n    </div>\n  {% endfor %}\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-09-27 00:32:05.251492",
 "modified_by": "Administrator",
 "module": "Milk",
 "name": "Supplier Report",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 1,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}